(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{69:function(e,t,i){e.exports=i(90)},74:function(e,t,i){},79:function(e,t,i){"use strict";var n=function e(){this.config={fullDiff:!1,showBlockMoves:!0,charDiff:!0,repeatedDiff:!0,recursiveDiff:!0,recursionMax:10,unlinkBlocks:!0,unlinkMax:5,blockMinLength:3,coloredBlocks:!1,noUnicodeSymbols:!1,stripTrailingNewline:!0,debug:!1,timer:!1,unitTesting:!1,regExpLetters:"a-zA-Z0-9"+"00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05270531-055605590561-058705D0-05EA05F0-05F20620-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280840-085808A008A2-08AC0904-0939093D09500958-09610971-09770979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10CF10CF20D05-0D0C0D0E-0D100D12-0D3A0D3D0D4E0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC-0EDF0F000F40-0F470F49-0F6C0F88-0F8C1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510C710CD10D0-10FA10FC-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1BBA-1BE51C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11CF51CF61D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209C21022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2CF22CF32D00-2D252D272D2D2D30-2D672D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78B-A78EA790-A793A7A0-A7AAA7F8-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDAAE0-AAEAAAF2-AAF4AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC".replace(/(\w{4})/g,"\\u$1"),regExpNewLines:"\\u0085\\u2028",regExpNewLinesAll:"\\n\\r\\u0085\\u2028",regExpBlanks:" \\t\\x0b\\u2000-\\u200b\\u202f\\u205f\\u3000",regExpFullStops:"\\u0589\\u06D4\\u0701\\u0702\\u0964\\u0DF4\\u1362\\u166E\\u1803\\u1809\\u2CF9\\u2CFE\\u2E3C\\u3002\\uA4FF\\uA60E\\uA6F3\\uFE52\\uFF0E\\uFF61",regExpNewParagraph:"\\f\\u2029",regExpExclamationMarks:"\\u01C3\\u01C3\\u01C3\\u055C\\u055C\\u07F9\\u1944\\u1944\\u203C\\u203C\\u2048\\u2048\\uFE15\\uFE57\\uFF01",regExpQuestionMarks:"\\u037E\\u055E\\u061F\\u1367\\u1945\\u2047\\u2049\\u2CFA\\u2CFB\\u2E2E\\uA60F\\uA6F7\\uFE56\\uFF1F",clipHeadingLeft:1500,clipParagraphLeftMax:1500,clipParagraphLeftMin:500,clipLineLeftMax:1e3,clipLineLeftMin:500,clipBlankLeftMax:1e3,clipBlankLeftMin:500,clipCharsLeft:500,clipHeadingRight:1500,clipParagraphRightMax:1500,clipParagraphRightMin:500,clipLineRightMax:1e3,clipLineRightMin:500,clipBlankRightMax:1e3,clipBlankRightMin:500,clipCharsRight:500,clipLinesRightMax:10,clipLinesLeftMax:10,clipSkipLines:5,clipSkipChars:1e3,cssMarkLeft:"\u25c0",cssMarkRight:"\u25b6",stylesheet:'.wikEdDiffInsert {font-weight: bold; background-color: #bbddff; color: #222; border-radius: 0.25em; padding: 0.2em 1px; } .wikEdDiffInsertBlank { background-color: #66bbff; } .wikEdDiffFragment:hover .wikEdDiffInsertBlank { background-color: #bbddff; } .wikEdDiffDelete {font-weight: bold; background-color: #ffe49c; color: #222; border-radius: 0.25em; padding: 0.2em 1px; } .wikEdDiffDeleteBlank { background-color: #ffd064; } .wikEdDiffFragment:hover .wikEdDiffDeleteBlank { background-color: #ffe49c; } .wikEdDiffBlock {font-weight: bold; background-color: #e8e8e8; border-radius: 0.25em; padding: 0.2em 1px; margin: 0 1px; } .wikEdDiffBlock { } .wikEdDiffBlock0 { background-color: #ffff80; } .wikEdDiffBlock1 { background-color: #d0ff80; } .wikEdDiffBlock2 { background-color: #ffd8f0; } .wikEdDiffBlock3 { background-color: #c0ffff; } .wikEdDiffBlock4 { background-color: #fff888; } .wikEdDiffBlock5 { background-color: #bbccff; } .wikEdDiffBlock6 { background-color: #e8c8ff; } .wikEdDiffBlock7 { background-color: #ffbbbb; } .wikEdDiffBlock8 { background-color: #a0e8a0; } .wikEdDiffBlockHighlight {background-color: #777; color: #fff; border: solid #777; border-width: 1px 0; } .wikEdDiffMarkLeft, .wikEdDiffMarkRight {font-weight: bold; background-color: #ffe49c; color: #666; border-radius: 0.25em; padding: 0.2em; margin: 0 1px; } .wikEdDiffMarkLeft:before { content: "{cssMarkLeft}"; } .wikEdDiffMarkRight:before { content: "{cssMarkRight}"; } .wikEdDiffMarkLeft.wikEdDiffNoUnicode:before { content: "<"; } .wikEdDiffMarkRight.wikEdDiffNoUnicode:before { content: ">"; } .wikEdDiffMark { background-color: #e8e8e8; color: #666; } .wikEdDiffMark0 { background-color: #ffff60; } .wikEdDiffMark1 { background-color: #c8f880; } .wikEdDiffMark2 { background-color: #ffd0f0; } .wikEdDiffMark3 { background-color: #a0ffff; } .wikEdDiffMark4 { background-color: #fff860; } .wikEdDiffMark5 { background-color: #b0c0ff; } .wikEdDiffMark6 { background-color: #e0c0ff; } .wikEdDiffMark7 { background-color: #ffa8a8; } .wikEdDiffMark8 { background-color: #98e898; } .wikEdDiffMarkHighlight { background-color: #777; color: #fff; } .wikEdDiffContainer { } .wikEdDiffFragment {white-space: pre-wrap; background: #fff; border: #bbb solid; border-width: 1px 1px 1px 0.5em; border-radius: 0.5em; font-family: sans-serif; font-size: 88%; line-height: 1.6; box-shadow: 2px 2px 2px #ddd; padding: 1em; margin: 0; } .wikEdDiffNoChange { background: #f0f0f0; border: 1px #bbb solid; border-radius: 0.5em; line-height: 1.6; box-shadow: 2px 2px 2px #ddd; padding: 0.5em; margin: 1em 0; text-align: center; } .wikEdDiffSeparator { margin-bottom: 1em; } .wikEdDiffOmittedChars { } .wikEdDiffNewline:before { content: "\xb6"; color: transparent; } .wikEdDiffBlock:hover .wikEdDiffNewline:before { color: #aaa; } .wikEdDiffBlockHighlight .wikEdDiffNewline:before { color: transparent; } .wikEdDiffBlockHighlight:hover .wikEdDiffNewline:before { color: #ccc; } .wikEdDiffBlockHighlight:hover .wikEdDiffInsert .wikEdDiffNewline:before, .wikEdDiffInsert:hover .wikEdDiffNewline:before{ color: #999; } .wikEdDiffBlockHighlight:hover .wikEdDiffDelete .wikEdDiffNewline:before, .wikEdDiffDelete:hover .wikEdDiffNewline:before{ color: #aaa; } .wikEdDiffTab { position: relative; } .wikEdDiffTabSymbol { position: absolute; top: -0.2em; } .wikEdDiffTabSymbol:before { content: "\u2192"; font-size: smaller; color: #ccc; } .wikEdDiffBlock .wikEdDiffTabSymbol:before { color: #aaa; } .wikEdDiffBlockHighlight .wikEdDiffTabSymbol:before { color: #aaa; } .wikEdDiffInsert .wikEdDiffTabSymbol:before { color: #aaa; } .wikEdDiffDelete .wikEdDiffTabSymbol:before { color: #bbb; } .wikEdDiffSpace { position: relative; } .wikEdDiffSpaceSymbol { position: absolute; top: -0.2em; left: -0.05em; } .wikEdDiffSpaceSymbol:before { content: "\xb7"; color: transparent; } .wikEdDiffBlock:hover .wikEdDiffSpaceSymbol:before { color: #999; } .wikEdDiffBlockHighlight .wikEdDiffSpaceSymbol:before { color: transparent; } .wikEdDiffBlockHighlight:hover .wikEdDiffSpaceSymbol:before { color: #ddd; } .wikEdDiffBlockHighlight:hover .wikEdDiffInsert .wikEdDiffSpaceSymbol:before,.wikEdDiffInsert:hover .wikEdDiffSpaceSymbol:before { color: #888; } .wikEdDiffBlockHighlight:hover .wikEdDiffDelete .wikEdDiffSpaceSymbol:before,.wikEdDiffDelete:hover .wikEdDiffSpaceSymbol:before { color: #999; } .wikEdDiffError .wikEdDiffFragment,.wikEdDiffError .wikEdDiffNoChange{ background: #faa; } .wikEdRefillChange {font-weight: bold; background-color: #00bb00; cursor: pointer; color: #eee; border-radius: 0.25em; padding: 0.2em 1px; }.wikEdRefillError {font-weight: bold; background-color: #bb0000; cursor: pointer; color: #eee; border-radius: 0.25em; padding: 0.2em 1px; }'},this.config.regExp={split:{paragraph:new RegExp("(\\r\\n|\\n|\\r){2,}|["+this.config.regExpNewParagraph+"]","g"),line:new RegExp("\\r\\n|\\n|\\r|["+this.config.regExpNewLinesAll+"]","g"),sentence:new RegExp("[^"+this.config.regExpBlanks+"].*?[.!?:;"+this.config.regExpFullStops+this.config.regExpExclamationMarks+this.config.regExpQuestionMarks+"]+(?=["+this.config.regExpBlanks+"]|$)","g"),chunk:new RegExp('\\[\\[[^\\[\\]\\n]+\\]\\]|\\{\\{[^\\{\\}\\n]+\\}\\}|\\[[^\\[\\]\\n]+\\]|<\\/?[^<>\\[\\]\\{\\}\\n]+>|\\[\\[[^\\[\\]\\|\\n]+\\]\\]\\||\\{\\{[^\\{\\}\\|\\n]+\\||\\b((https?:|)\\/\\/)[^\\x00-\\x20\\s"\\[\\]\\x7f]+|RFL\\w\\d+LFR',"g"),word:new RegExp("(\\w+|[_"+this.config.regExpLetters+"])+(['\u2019][_"+this.config.regExpLetters+"]*)*|\\[\\[|\\]\\]|\\{\\{|\\}\\}|&\\w+;|'''|''|==+|\\{\\||\\|\\}|\\|-|.","g"),character:/./g},blankOnlyToken:new RegExp("[^"+this.config.regExpBlanks+this.config.regExpNewLinesAll+this.config.regExpNewParagraph+"]"),slideStop:new RegExp("["+this.config.regExpNewLinesAll+this.config.regExpNewParagraph+"]$"),slideBorder:new RegExp("["+this.config.regExpBlanks+"]$"),countWords:new RegExp("(\\w+|[_"+this.config.regExpLetters+"])+(['\u2019][_"+this.config.regExpLetters+"]*)*","g"),countChunks:new RegExp('\\[\\[[^\\[\\]\\n]+\\]\\]|\\{\\{[^\\{\\}\\n]+\\}\\}|\\[[^\\[\\]\\n]+\\]|<\\/?[^<>\\[\\]\\{\\}\\n]+>|\\[\\[[^\\[\\]\\|\\n]+\\]\\]\\||\\{\\{[^\\{\\}\\|\\n]+\\||\\b((https?:|)\\/\\/)[^\\x00-\\x20\\s"\\[\\]\\x7f]+',"g"),blankBlock:/^([^\t\S]+|[^\t])$/,clipLine:new RegExp("["+this.config.regExpNewLinesAll+this.config.regExpNewParagraph+"]+","g"),clipHeading:new RegExp("( ^|\\n)(==+.+?==+|\\{\\||\\|\\}).*?(?=\\n|$)","g"),clipParagraph:new RegExp("( (\\r\\n|\\n|\\r){2,}|["+this.config.regExpNewParagraph+"])+","g"),clipBlank:new RegExp("["+this.config.regExpBlanks+"]+","g"),clipTrimNewLinesLeft:new RegExp("["+this.config.regExpNewLinesAll+this.config.regExpNewParagraph+"]+$","g"),clipTrimNewLinesRight:new RegExp("^["+this.config.regExpNewLinesAll+this.config.regExpNewParagraph+"]+","g"),clipTrimBlanksLeft:new RegExp("["+this.config.regExpBlanks+this.config.regExpNewLinesAll+this.config.regExpNewParagraph+"]+$","g"),clipTrimBlanksRight:new RegExp("^["+this.config.regExpBlanks+this.config.regExpNewLinesAll+this.config.regExpNewParagraph+"]+","g"),refillChange:new RegExp("RFL(\\w)(\\d+)LFR","g")},this.config.msg={"wiked-diff-empty":"(No difference)","wiked-diff-same":"=","wiked-diff-ins":"+","wiked-diff-del":"-","wiked-diff-block-left":"\u25c0","wiked-diff-block-right":"\u25b6","wiked-diff-block-left-nounicode":"<","wiked-diff-block-right-nounicode":">","wiked-diff-error":"Error: diff not consistent with versions!"},this.config.htmlCode={noChangeStart:'<div class="wikEdDiffNoChange" title="'+this.config.msg["wiked-diff-same"]+'">',noChangeEnd:"</div>",containerStart:'<div class="wikEdDiffContainer" id="wikEdDiffContainer">',containerEnd:"</div>",fragmentStart:'<pre class="wikEdDiffFragment" style="white-space: pre-wrap;">',fragmentEnd:"</pre>",separator:'<div class="wikEdDiffSeparator"></div>',insertStart:'<span class="wikEdDiffInsert" title="'+this.config.msg["wiked-diff-ins"]+'">',insertStartBlank:'<span class="wikEdDiffInsert wikEdDiffInsertBlank" title="'+this.config.msg["wiked-diff-ins"]+'">',insertEnd:"</span>",deleteStart:'<span class="wikEdDiffDelete" title="'+this.config.msg["wiked-diff-del"]+'">',deleteStartBlank:'<span class="wikEdDiffDelete wikEdDiffDeleteBlank" title="'+this.config.msg["wiked-diff-del"]+'">',deleteEnd:"</span>",blockStart:'<span class="wikEdDiffBlock"title="{title}" id="wikEdDiffBlock{number}"onmouseover="wikEdDiffBlockHandler(undefined, this, \'mouseover\');">',blockColoredStart:'<span class="wikEdDiffBlock wikEdDiffBlock wikEdDiffBlock{number}"title="{title}" id="wikEdDiffBlock{number}"onmouseover="wikEdDiffBlockHandler(undefined, this, \'mouseover\');">',blockEnd:"</span>",markLeft:'<span class="wikEdDiffMarkLeft{nounicode}"title="{title}" id="wikEdDiffMark{number}"onmouseover="wikEdDiffBlockHandler(undefined, this, \'mouseover\');"></span>',markLeftColored:'<span class="wikEdDiffMarkLeft{nounicode} wikEdDiffMark wikEdDiffMark{number}"title="{title}" id="wikEdDiffMark{number}"onmouseover="wikEdDiffBlockHandler(undefined, this, \'mouseover\');"></span>',markRight:'<span class="wikEdDiffMarkRight{nounicode}"title="{title}" id="wikEdDiffMark{number}"onmouseover="wikEdDiffBlockHandler(undefined, this, \'mouseover\');"></span>',markRightColored:'<span class="wikEdDiffMarkRight{nounicode} wikEdDiffMark wikEdDiffMark{number}"title="{title}" id="wikEdDiffMark{number}"onmouseover="wikEdDiffBlockHandler(undefined, this, \'mouseover\');"></span>',newline:'<span class="wikEdDiffNewline">\n</span>',tab:'<span class="wikEdDiffTab"><span class="wikEdDiffTabSymbol"></span>\t</span>',space:'<span class="wikEdDiffSpace"><span class="wikEdDiffSpaceSymbol"></span> </span>',omittedChars:'<span class="wikEdDiffOmittedChars">\u2026</span>',errorStart:'<div class="wikEdDiffError" title="Error: diff not consistent with versions!">',errorEnd:"</div>",refillChange:'<span class="wikEdRefillChange" data-id="{number}" title="reFill #{number}" onclick="window.refillChangeClickHandler({number})">&#128393;</span>',refillError:'<span class="wikEdRefillError" data-id="{number}" title="reFill #{number}" onclick="window.refillErrorClickHandler({number})">&#128393;</span>'},this.config.blockHandler=function(e,t,i){void 0===e&&void 0!==window.event&&(e=window.event);var n=t.id.replace(/\D/g,""),o=document.getElementById("wikEdDiffBlock"+n),l=document.getElementById("wikEdDiffMark"+n);if(null!==o&&null!==l){if("mouseover"===i&&(t.onmouseover=null,t.onmouseout=function(e){window.wikEdDiffBlockHandler(e,t,"mouseout")},t.onclick=function(e){window.wikEdDiffBlockHandler(e,t,"click")},o.className+=" wikEdDiffBlockHighlight",l.className+=" wikEdDiffMarkHighlight"),("mouseout"===i||"click"===i)&&(t.onmouseout=null,t.onmouseover=function(e){window.wikEdDiffBlockHandler(e,t,"mouseover")},"click"!==i)){o.className=o.className.replace(/ wikEdDiffBlockHighlight/g,""),l.className=l.className.replace(/ wikEdDiffMarkHighlight/g,"");var s=document.getElementById("wikEdDiffContainer");if(null!==s)for(var r=s.getElementsByTagName("span"),a=r.length,c=0;c<a;c++)r[c]!==o&&r[c]!==l&&(-1!==r[c].className.indexOf(" wikEdDiffBlockHighlight")?r[c].className=r[c].className.replace(/ wikEdDiffBlockHighlight/g,""):-1!==r[c].className.indexOf(" wikEdDiffMarkHighlight")&&(r[c].className=r[c].className.replace(/ wikEdDiffMarkHighlight/g,"")))}if("click"===i){var h,f,d,u=0,g=h=t===o?l:o;do{u+=g.offsetTop}while(null!==(g=g.offsetParent));f=void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop,void 0!==e.pageY?d=e.pageY:void 0!==e.clientY&&(d=e.clientY+f);var k=12;void 0!==window.getComputedStyle&&(k=parseInt(window.getComputedStyle(h).getPropertyValue("line-height"))),window.scroll(0,u+f-d+k/2)}}},this.newText=null,this.oldText=null,this.symbols={token:[],hashTable:{},linked:!1},this.bordersDown=[],this.bordersUp=[],this.blocks=[],this.maxWords=0,this.groups=[],this.sections=[],this.timer={},this.recursionTimer=[],this.error=!1,this.fragments=[],this.html="",this.init=function(){if(this.addStyleSheet(this.config.stylesheet),!0===this.config.showBlockMoves)if("object"===typeof GM_info){var e="var wikEdDiffBlockHandler = "+this.config.blockHandler.toString()+";";this.addScript(e)}else window.wikEdDiffBlockHandler=this.config.blockHandler},this.diff=function(t,i){return!0===this.config.timer&&this.time("total"),!0===this.config.timer&&this.time("diff"),this.error=!1,!0===this.config.stripTrailingNewline&&"\n"===i.substr(-1)&&t.substr(!1)&&(i=i.substr(0,i.length-1),t=t.substr(0,t.length-1)),this.newText=new e.WikEdDiffText(i,this),this.oldText=new e.WikEdDiffText(t,this),this.newText.text===this.oldText.text?(this.html=this.config.htmlCode.containerStart+this.config.htmlCode.noChangeStart+this.htmlEscape(this.config.msg["wiked-diff-empty"])+this.config.htmlCode.noChangeEnd+this.config.htmlCode.containerEnd,this.html):""===this.oldText.text||"\n"===this.oldText.text&&"\n"===this.newText.text.charAt(this.newText.text.length-1)?(this.html=this.config.htmlCode.containerStart+this.config.htmlCode.fragmentStart+this.config.htmlCode.insertStart+this.htmlEscape(this.newText.text)+this.config.htmlCode.insertEnd+this.config.htmlCode.fragmentEnd+this.config.htmlCode.containerEnd,this.html):""===this.newText.text||"\n"===this.newText.text&&"\n"===this.oldText.text.charAt(this.oldText.text.length-1)?(this.html=this.config.htmlCode.containerStart+this.config.htmlCode.fragmentStart+this.config.htmlCode.deleteStart+this.htmlEscape(this.oldText.text)+this.config.htmlCode.deleteEnd+this.config.htmlCode.fragmentEnd+this.config.htmlCode.containerEnd,this.html):(!0===this.config.timer&&this.time("paragraph split"),this.newText.splitText("paragraph"),this.oldText.splitText("paragraph"),!0===this.config.timer&&this.timeEnd("paragraph split"),this.calculateDiff("line"),!0===this.config.timer&&this.time("line split"),this.newText.splitRefine("line"),this.oldText.splitRefine("line"),!0===this.config.timer&&this.timeEnd("line split"),this.calculateDiff("line"),!0===this.config.timer&&this.time("sentence split"),this.newText.splitRefine("sentence"),this.oldText.splitRefine("sentence"),!0===this.config.timer&&this.timeEnd("sentence split"),this.calculateDiff("sentence"),!0===this.config.timer&&this.time("chunk split"),this.newText.splitRefine("chunk"),this.oldText.splitRefine("chunk"),!0===this.config.timer&&this.timeEnd("chunk split"),this.calculateDiff("chunk"),!0===this.config.timer&&this.time("word split"),this.newText.splitRefine("word"),this.oldText.splitRefine("word"),!0===this.config.timer&&this.timeEnd("word split"),this.calculateDiff("word",!0),!0===this.config.timer&&this.time("word slide"),this.slideGaps(this.newText,this.oldText),this.slideGaps(this.oldText,this.newText),!0===this.config.timer&&this.timeEnd("word slide"),!0===this.config.charDiff&&(!0===this.config.timer&&this.time("character split"),this.splitRefineChars(),!0===this.config.timer&&this.timeEnd("character split"),this.calculateDiff("character",!0),!0===this.config.timer&&this.time("character slide"),this.slideGaps(this.newText,this.oldText),this.slideGaps(this.oldText,this.newText),!0===this.config.timer&&this.timeEnd("character slide")),this.symbols=void 0,this.bordersDown=void 0,this.bordersUp=void 0,this.newText.words=void 0,this.oldText.words=void 0,this.newText.enumerateTokens(),this.oldText.enumerateTokens(),!0===this.config.timer&&this.time("blocks"),this.detectBlocks(),!0===this.config.timer&&this.timeEnd("blocks"),this.newText.tokens=void 0,this.oldText.tokens=void 0,this.getDiffFragments(),this.blocks=void 0,this.groups=void 0,this.sections=void 0,!0===this.config.timer&&this.timeEnd("diff"),!0===this.config.unitTesting&&(!0===this.config.timer&&this.time("unit tests"),this.unitTests(),!0===this.config.timer&&this.timeEnd("unit tests")),!1===this.config.fullDiff&&(!0===this.config.timer&&this.time("clip"),this.clipDiffFragments(),!0===this.config.timer&&this.timeEnd("clip")),!0===this.config.timer&&this.time("html"),this.getDiffHtml(),!0===this.config.timer&&this.timeEnd("html"),""===this.html&&(this.html=this.config.htmlCode.containerStart+this.config.htmlCode.noChangeStart+this.htmlEscape(this.config.msg["wiked-diff-empty"])+this.config.htmlCode.noChangeEnd+this.config.htmlCode.containerEnd),!0===this.error&&(this.html=this.config.htmlCode.errorStart+this.html+this.config.htmlCode.errorEnd),!0===this.config.timer&&this.timeEnd("total"),this.html)},this.splitRefineChars=function(){for(var e=[],t=null,i=this.newText.first,n=this.oldText.first;null!==i;){var o=this.newText.tokens[i].link,l=null;null!==n&&(l=this.oldText.tokens[n].link),null===t&&null===o&&null===l?(t=e.length,e.push({newFirst:i,newLast:i,newTokens:1,oldFirst:n,oldLast:n,oldTokens:null,charSplit:null})):null!==t&&null===o?(e[t].newLast=i,e[t].newTokens++):null!==t&&null!==o&&(t=null),null!==o&&(n=this.oldText.tokens[o].next),i=this.newText.tokens[i].next}var s=e.length;for(t=0;t<s;t++)for(n=e[t].oldFirst;null!==n&&null!==this.oldText.tokens[n]&&null===this.oldText.tokens[n].link;)e[t].oldLast=n,e[t].oldTokens++,n=this.oldText.tokens[n].next;for(s=e.length,t=0;t<s;t++){var r=!0;if(e[t].newTokens!==e[t].oldTokens){if(1===e[t].newTokens&&3===e[t].oldTokens){var a=this.newText.tokens[e[t].newFirst].token,c=this.oldText.tokens[e[t].oldFirst].token,h=this.oldText.tokens[e[t].oldLast].token;if(0!==a.indexOf(c)||a.indexOf(h)!==a.length-h.length)continue}else{if(1!==e[t].oldTokens||3!==e[t].newTokens)continue;a=this.oldText.tokens[e[t].oldFirst].token,c=this.newText.tokens[e[t].newFirst].token,h=this.newText.tokens[e[t].newLast].token;if(0!==a.indexOf(c)||a.indexOf(h)!==a.length-h.length)continue}e[t].charSplit=!0}else{for(i=e[t].newFirst,n=e[t].oldFirst;null!==i;){var f,d,u=this.newText.tokens[i].token,g=this.oldText.tokens[n].token;if(u.length<g.length?(f=u,d=g):(f=g,d=u),u.length!==g.length){for(var k=0;k<f.length&&u.charAt(k)===g.charAt(k);)k++;for(var p=0;p<f.length&&u.charAt(u.length-1-p)===g.charAt(g.length-1-p);)p++;if(k+p!==f.length&&-1===d.indexOf(f)&&k<f.length/2&&p<f.length/2){r=!1;break}}else if(u!==g){for(var m=0,E=f.length,x=0;x<E;x++)f.charAt(x)===d.charAt(x)&&m++;if(m/f.length<.49){r=!1;break}}if(i===e[t].newLast)break;i=this.newText.tokens[i].next,n=this.oldText.tokens[n].next}e[t].charSplit=r}}for(s=e.length,t=0;t<s;t++)if(!0===e[t].charSplit){i=e[t].newFirst,n=e[t].oldFirst;for(var w=i-e[t].newLast,b=n-e[t].oldLast;null!==i||null!==n;)w===b&&this.newText.tokens[i].token===this.oldText.tokens[n].token?(this.newText.tokens[i].link=n,this.oldText.tokens[n].link=i):(null!==i&&this.newText.splitText("character",i),null!==n&&this.oldText.splitText("character",n)),i===e[t].newLast&&(i=null),n===e[t].oldLast&&(n=null),null!==i&&(i=this.newText.tokens[i].next),null!==n&&(n=this.oldText.tokens[n].next)}},this.slideGaps=function(e,t){for(var i=this.config.regExp.slideBorder,n=this.config.regExp.slideStop,o=e.first,l=null;null!==o;){if(null===l&&null===e.tokens[o].link)l=o;else if(null!==l&&null!==e.tokens[o].link){var s=l,r=e.tokens[o].prev,a=s,c=e.tokens[r].next;null!==a&&null!==c&&null===e.tokens[a].link&&null!==e.tokens[c].link&&e.tokens[a].token===e.tokens[c].token&&(e.tokens[a].link=e.tokens[c].link,t.tokens[e.tokens[a].link].link=a,e.tokens[c].link=null,s=e.tokens[s].next,r=e.tokens[r].next,a=e.tokens[a].next,c=e.tokens[c].next);a=e.tokens[s].prev,c=r;var h=i.test(e.tokens[s].token),f=a;if(null===e.tokens[c].link)for(;null!==a&&null!==c&&null!==e.tokens[a].link&&e.tokens[a].token===e.tokens[c].token;){if(null!==a){if(!0===n.test(e.tokens[a].token)){f=a;break}i.test(e.tokens[a].token)!==h&&(f=a)}a=e.tokens[a].prev,c=e.tokens[c].prev}for(a=e.tokens[s].prev,c=r;null!==a&&null!==c&&a!==f&&null!==e.tokens[a].link&&null===e.tokens[c].link&&e.tokens[a].token===e.tokens[c].token;)e.tokens[c].link=e.tokens[a].link,t.tokens[e.tokens[c].link].link=c,e.tokens[a].link=null,a=e.tokens[a].prev,c=e.tokens[c].prev;l=null}o=e.tokens[o].next}},this.calculateDiff=function(e,t,i,n,o,l,s){var r,a,c;void 0===i&&(i=!1),void 0===t&&(t=!1),void 0===n&&(n=this.newText.first),void 0===o&&(o=this.oldText.first),void 0===l&&(l=!1),void 0===s&&(s=0),!0===this.config.timer&&!1===i&&0===s&&this.time(e),!0===this.config.timer&&!1===i&&this.time(e+s),0===s&&!1===i?(r=this.symbols,a=this.bordersDown,c=this.bordersUp):(r={token:[],hashTable:{},linked:!1},a=[],c=[]);for(var h=[],f=[],d=n;null!==d;){if(null===this.newText.tokens[d].link){var u=this.newText.tokens[d].token;if(!1===Object.prototype.hasOwnProperty.call(r.hashTable,u))r.hashTable[u]=r.token.length,r.token.push({newCount:1,oldCount:0,newToken:d,oldToken:null});else{var g=r.hashTable[u];r.token[g].newCount++}}else if(s>0)break;d=!1===l?this.newText.tokens[d].next:this.newText.tokens[d].prev}for(var k=o;null!==k;){if(null===this.oldText.tokens[k].link){u=this.oldText.tokens[k].token;if(!1===Object.prototype.hasOwnProperty.call(r.hashTable,u))r.hashTable[u]=r.token.length,r.token.push({newCount:0,oldCount:1,newToken:null,oldToken:k});else{g=r.hashTable[u];r.token[g].oldCount++,r.token[g].oldToken=k}}else if(s>0)break;k=!1===l?this.oldText.tokens[k].next:this.oldText.tokens[k].prev}var p=r.token.length;for(d=0;d<p;d++)if(1===r.token[d].newCount&&1===r.token[d].oldCount){var m=r.token[d].newToken,E=r.token[d].oldToken,x=this.newText.tokens[m],w=this.oldText.tokens[E];if(null===x.link&&!0===this.config.regExp.blankOnlyToken.test(x.token)&&(x.link=E,w.link=m,r.linked=!0,a.push([m,E]),c.push([m,E]),0===s)){var b=!1;if("character"===e)b=!0;else{var v=((u=x.token).match(this.config.regExp.countWords)||[]).concat(u.match(this.config.regExp.countChunks)||[]),A=v.length;if(A>=this.config.blockMinLength)b=!0;else for(d=0;d<A;d++){var D=v[d];if(1===this.oldText.words[D]&&1===this.newText.words[D]&&!0===Object.prototype.hasOwnProperty.call(this.oldText.words,D)&&!0===Object.prototype.hasOwnProperty.call(this.newText.words,D)){b=!0;break}}}!0===b&&(x.unique=!0,w.unique=!0)}}if(!0===r.linked){for(var T=a.length,C=0;C<T;C++){var B=d=a[C][0],F=k=a[C][1];for(d=this.newText.tokens[d].next,k=this.oldText.tokens[k].next;null!==d&&null!==k&&null===this.newText.tokens[d].link&&null===this.oldText.tokens[k].link;){if(this.newText.tokens[d].token!==this.oldText.tokens[k].token){f.push([B,F]);break}this.newText.tokens[d].link=k,this.oldText.tokens[k].link=d,B=d,F=k,d=this.newText.tokens[d].next,k=this.oldText.tokens[k].next}}for(T=c.length,C=0;C<T;C++){B=d=c[C][0],F=k=c[C][1];for(d=this.newText.tokens[d].prev,k=this.oldText.tokens[k].prev;null!==d&&null!==k&&null===this.newText.tokens[d].link&&null===this.oldText.tokens[k].link;){if(this.newText.tokens[d].token!==this.oldText.tokens[k].token){h.push([B,F]);break}this.newText.tokens[d].link=k,this.oldText.tokens[k].link=d,B=d,F=k,d=this.newText.tokens[d].prev,k=this.oldText.tokens[k].prev}}if(0===s&&!1===i){for(d=this.newText.first,k=this.oldText.first,B=null,F=null;null!==d&&null!==k&&null===this.newText.tokens[d].link&&null===this.oldText.tokens[k].link&&this.newText.tokens[d].token===this.oldText.tokens[k].token;)this.newText.tokens[d].link=k,this.oldText.tokens[k].link=d,B=d,F=k,d=this.newText.tokens[d].next,k=this.oldText.tokens[k].next;for(null!==B&&f.push([B,F]),d=this.newText.last,k=this.oldText.last,B=null,F=null;null!==d&&null!==k&&null===this.newText.tokens[d].link&&null===this.oldText.tokens[k].link&&this.newText.tokens[d].token===this.oldText.tokens[k].token;)this.newText.tokens[d].link=k,this.oldText.tokens[k].link=d,B=d,F=k,d=this.newText.tokens[d].prev,k=this.oldText.tokens[k].prev;null!==B&&h.push([B,F])}if(0===s&&!1===i?(this.bordersDown=f,this.bordersUp=h):(this.bordersDown=this.bordersDown.concat(f),this.bordersUp=this.bordersUp.concat(h)),!1===i&&!0===this.config.repeatedDiff){var y=!0;this.calculateDiff(e,t,y,n,o,l,s)}if(!0===t&&!0===this.config.recursiveDiff&&s<this.config.recursionMax){T=f.length;for(C=0;C<T;C++){d=f[C][0],k=f[C][1];if(d=this.newText.tokens[d].next,k=this.oldText.tokens[k].next,null!==d&&null!==k&&null===this.newText.tokens[d].link&&null===this.oldText.tokens[k].link){y=!1;var S=!1;this.calculateDiff(e,t,y,d,k,S,s+1)}}T=h.length;for(C=0;C<T;C++){d=h[C][0],k=h[C][1];if(d=this.newText.tokens[d].prev,k=this.oldText.tokens[k].prev,null!==d&&null!==k&&null===this.newText.tokens[d].link&&null===this.oldText.tokens[k].link){y=!1,S=!0;this.calculateDiff(e,t,y,d,k,S,s+1)}}}}!0===this.config.timer&&!1===i&&(void 0===this.recursionTimer[s]&&(this.recursionTimer[s]=0),this.recursionTimer[s]+=this.timeEnd(e+s,!0)),!0===this.config.timer&&!1===i&&0===s&&(this.timeRecursionEnd(e),this.timeEnd(e))},this.detectBlocks=function(){!0===this.config.debug&&(this.oldText.debugText("Old text"),this.newText.debugText("New text")),this.getSameBlocks(),this.getSections(),this.getGroups(),this.setFixed();var e=0;if(!0===this.config.unlinkBlocks&&this.config.blockMinLength>0&&this.maxWords>=this.config.blockMinLength){!0===this.config.timer&&this.time("total unlinking");for(var t=!0;!0===t&&e<this.config.unlinkMax;)!0===(t=this.unlinkBlocks())&&(e++,this.slideGaps(this.newText,this.oldText),this.slideGaps(this.oldText,this.newText),this.maxWords=0,this.getSameBlocks(),this.getSections(),this.getGroups(),this.setFixed());!0===this.config.timer&&this.timeEnd("total unlinking")}this.getDelBlocks(),this.positionDelBlocks(),this.getInsBlocks(),this.setInsGroups(),this.insertMarks(),!0!==this.config.timer&&!0!==this.config.debug||console.log("Unlink count: ",e),!0===this.config.debug&&(this.debugGroups("Groups"),this.debugBlocks("Blocks"))},this.getSameBlocks=function(){!0===this.config.timer&&this.time("getSameBlocks");var e=this.blocks;e.splice(0);for(var t=this.oldText.first,i=null;null!==t;){for(;null!==t&&null===this.oldText.tokens[t].link;)t=this.oldText.tokens[t].next;if(null!==t){for(var n=i=this.oldText.tokens[t].link,o=t,l=0,s=!1,r="";null!==i&&null!==t&&this.oldText.tokens[t].link===i;)r+=this.oldText.tokens[t].token,l++,!0===this.newText.tokens[i].unique&&(s=!0),i=this.newText.tokens[i].next,t=this.oldText.tokens[t].next;e.push({oldBlock:e.length,newBlock:null,oldNumber:this.oldText.tokens[o].number,newNumber:this.newText.tokens[n].number,oldStart:o,count:l,unique:s,words:this.wordCount(r),chars:r.length,type:"=",section:null,group:null,fixed:null,moved:null,text:r})}}e.sort(function(e,t){return e.newNumber-t.newNumber});for(var a=e.length,c=0;c<a;c++)e[c].newBlock=c;!0===this.config.timer&&this.timeEnd("getSameBlocks")},this.getSections=function(){!0===this.config.timer&&this.time("getSections");var e=this.blocks,t=this.sections;t.splice(0);for(var i=e.length,n=0;n<i;n++){for(var o=n,l=n,s=e[o].oldNumber,r=s,a=o+1;a<i;a++)e[a].oldNumber>s?s=e[a].oldNumber:e[a].oldNumber<r&&(l=a,r=s);if(l>o){for(var c=o;c<=l;c++)e[c].section=t.length;t.push({blockStart:o,blockEnd:l}),n=l}}!0===this.config.timer&&this.timeEnd("getSections")},this.getGroups=function(){!0===this.config.timer&&this.time("getGroups");var e=this.blocks,t=this.groups;t.splice(0);for(var i=e.length,n=0;n<i;n++){for(var o=n,l=n,s=e[o].oldBlock,r=this.wordCount(e[n].text),a=r,c=e[n].unique,h=e[n].chars,f=l+1;f<i&&e[f].oldBlock===s+1;f++)s=e[f].oldBlock,e[f].words>a&&(a=e[f].words),!0===e[f].unique&&(c=!0),r+=e[f].words,h+=e[f].chars,l=f;if(l>=o){var d=!1;null===e[o].section&&(d=!0);for(f=o;f<=l;f++)e[f].group=t.length,e[f].fixed=d;t.push({oldNumber:e[o].oldNumber,blockStart:o,blockEnd:l,unique:c,maxWords:a,words:r,chars:h,fixed:d,movedFrom:null,color:null}),n=l,a>this.maxWords&&(this.maxWords=a)}}!0===this.config.timer&&this.timeEnd("getGroups")},this.setFixed=function(){!0===this.config.timer&&this.time("setFixed");for(var e=this.blocks,t=this.groups,i=this.sections,n=i.length,o=0;o<n;o++){for(var l=i[o].blockStart,s=i[o].blockEnd,r=e[l].group,a=e[s].group,c=[],h=0,f=null,d=r;d<=a;d++){var u=this.findMaxPath(d,a,c);u.chars>h&&(f=u.path,h=u.chars)}var g=f.length;for(d=0;d<g;d++){var k=f[d];t[k].fixed=!0;for(var p=t[k].blockStart;p<=t[k].blockEnd;p++)e[p].fixed=!0}}!0===this.config.timer&&this.timeEnd("setFixed")},this.findMaxPath=function(e,t,i){for(var n=this.groups,o=0,l=n[e].oldNumber,s={path:[],chars:0},r=e+1;r<=t;r++){var a;if(!(n[r].oldNumber<l))(a=void 0!==i[r]?{path:i[r].path.slice(),chars:i[r].chars}:this.findMaxPath(r,t,i)).chars>o&&(o=a.chars,s=a)}return s.path.unshift(e),s.chars+=n[e].chars,void 0===i[e]&&(i[e]={path:s.path.slice(),chars:s.chars}),s},this.unlinkBlocks=function(){for(var e=this.blocks,t=this.groups,i=!1,n=t.length,o=0;o<n;o++){var l=t[o].blockStart,s=t[o].blockEnd;if(t[o].maxWords<this.config.blockMinLength&&!1===t[o].unique)for(var r=l;r<=s;r++)"="===e[r].type&&(this.unlinkSingleBlock(e[r]),i=!0);else{for(r=l;r<=s;r++)if("="===e[r].type){if(e[r].words>1||!0===e[r].unique)break;this.unlinkSingleBlock(e[r]),i=!0,l=r}for(r=s;r>l;r--)if("="===e[r].type){if(e[r].words>1||1===e[r].words&&!0===e[r].unique)break;this.unlinkSingleBlock(e[r]),i=!0}}}return i},this.unlinkSingleBlock=function(e){for(var t=e.oldStart,i=0;i<e.count;i++)this.newText.tokens[this.oldText.tokens[t].link].link=null,this.oldText.tokens[t].link=null,t=this.oldText.tokens[t].next},this.getDelBlocks=function(){!0===this.config.timer&&this.time("getDelBlocks");for(var e=this.blocks,t=this.oldText.first,i=null;null!==t;){for(var n=t,o=0,l="";null!==t&&null===this.oldText.tokens[t].link;)o++,l+=this.oldText.tokens[t].token,t=this.oldText.tokens[t].next;if(0!==o&&e.push({oldBlock:null,newBlock:null,oldNumber:this.oldText.tokens[n].number,newNumber:null,oldStart:n,count:o,unique:!1,words:null,chars:l.length,type:"-",section:null,group:null,fixed:null,moved:null,text:l}),null!==t)for(i=this.oldText.tokens[t].link;null!==i&&null!==t&&this.oldText.tokens[t].link===i;)i=this.newText.tokens[i].next,t=this.oldText.tokens[t].next}!0===this.config.timer&&this.timeEnd("getDelBlocks")},this.positionDelBlocks=function(){!0===this.config.timer&&this.time("positionDelBlocks");var e=this.blocks,t=this.groups,i=e.slice();i.sort(function(e,t){return e.oldNumber-t.oldNumber});for(var n=i.length,o=0;o<n;o++){var l=i[o];if("-"===l.type){var s=null,r=null;o>0&&(r=e[s=i[o-1].newBlock]);var a=null,c=null;o<i.length-1&&(c=e[a=i[o+1].newBlock]);var h=null;if(null!==r&&"="===r.type&&!0===r.fixed)h=r;else if(null!==c&&"="===c.type&&!0===c.fixed)h=c;else if(null!==r&&"="===r.type&&s!==t[r.group].blockEnd)h=r;else if(null!==c&&"="===c.type&&a!==t[c.group].blockStart)h=c;else for(var f=o;f>=0;f--)if("="===i[f].type&&!0===i[f].fixed){h=i[f];break}null===h?l.newNumber=-1:(l.newNumber=h.newNumber,l.section=h.section,l.group=h.group,l.fixed=h.fixed)}}this.sortBlocks(),!0===this.config.timer&&this.timeEnd("positionDelBlocks")},this.getInsBlocks=function(){var e=this;!0===this.config.timer&&this.time("getInsBlocks");for(var t=this.blocks,i=this.newText.first;null!==i;){for(;null!==i&&null!==this.newText.tokens[i].link;)i=this.newText.tokens[i].next;if(null!==i){for(var n=i,o=0,l="",s=function(i){var o=Object.assign({oldBlock:null,newBlock:null,oldNumber:null,newNumber:e.newText.tokens[n].number,oldStart:null,count:0,unique:!1,words:null,chars:0,type:"+",section:null,group:null,fixed:null,moved:null,text:""},i);t.push(o)};null!==i&&null===this.newText.tokens[i].link;){l+=this.newText.tokens[i].token,i=this.newText.tokens[i].next;var r=this.config.regExp.refillChange.exec(l);if(r){if(0!==r.index){var a=l.substring(0,r.index);s({count:++o,chars:a.length,text:a})}var c=l.substring(r.index,r.index+r[0].length);if(s({count:++o,chars:c.length,text:c,type:"r",markerType:r[1],id:r[2]}),r.index+r[0].length<l.length){var h=l.substring(r.index,r[0].length);s({count:++o,chars:h.length,text:h})}l=""}}s({count:++o,chars:l.length,text:l})}}this.sortBlocks(),!0===this.config.timer&&this.timeEnd("getInsBlocks")},this.sortBlocks=function(){var e=this.blocks,t=this.groups;e.sort(function(e,t){var i=e.newNumber-t.newNumber;return 0===i&&(i=e.oldNumber-t.oldNumber),i});for(var i=null,n=e.length,o=0;o<n;o++){var l=e[o].group;null!==l&&(l!==i&&(t[i=e[o].group].blockStart=o,t[i].oldNumber=e[o].oldNumber),t[l].blockEnd=o)}},this.setInsGroups=function(){!0===this.config.timer&&this.time("setInsGroups");for(var e=this.blocks,t=this.groups,i=t.length,n=0;n<i;n++)for(var o=t[n].fixed,l=t[n].blockStart;l<=t[n].blockEnd;l++)null===e[l].group&&(e[l].group=n,e[l].fixed=o);var s=e.length;for(l=0;l<s;l++)null===e[l].group&&(e[l].group=t.length,t.push({oldNumber:e[l].oldNumber,blockStart:l,blockEnd:l,unique:e[l].unique,maxWords:e[l].words,words:e[l].words,chars:e[l].chars,fixed:e[l].fixed,movedFrom:null,color:null}));!0===this.config.timer&&this.timeEnd("setInsGroups")},this.insertMarks=function(){!0===this.config.timer&&this.time("insertMarks");for(var e=this.blocks,t=this.groups,i=[],n=1,o=e.slice(),l=o.length,s=0;s<l;s++)o[s].number=s;o.sort(function(e,t){var i=e.oldNumber-t.oldNumber;return 0===i&&(i=e.newNumber-t.newNumber),i});var r=[];for(s=0;s<l;s++)r[o[s].number]=s;var a=t.length;for(i=0;i<a;i++){var c=t[i];if(!1===c.fixed){var h=c.oldNumber,f=null;(d=r[c.blockStart])>0&&(f=o[d-1]);var d,u=null;(d=r[c.blockEnd])<o.length-1&&(u=o[d+1]);var g,k,p=null;if(null!==f&&"="===f.type&&!0===f.fixed)p=f;else if(null!==u&&"="===u.type&&!0===u.fixed)p=u;else for(var m=r[c.blockStart]-1;m>=0;m--)if("="===o[m].type&&!0===o[m].fixed){p=o[m];break}null===p?(g=-1,k=t.length,t.push({oldNumber:0,blockStart:e.length,blockEnd:e.length,unique:!1,maxWords:null,words:null,chars:0,fixed:null,movedFrom:null,color:null})):(g=p.newNumber,k=p.group),e.push({oldBlock:null,newBlock:null,oldNumber:h,newNumber:g,oldStart:null,count:null,unique:null,words:null,chars:0,type:"|",section:null,group:k,fixed:!0,moved:i,text:""}),c.color=n,c.movedFrom=k,n++}}this.sortBlocks(),!0===this.config.timer&&this.timeEnd("insertMarks")},this.getDiffFragments=function(){var e=this.blocks,t=this.groups,i=this.fragments,n=t.slice();n.sort(function(e,t){return e.blockStart-t.blockStart});for(var o=n.length,l=0;l<o;l++){var s=n[l].blockStart,r=n[l].blockEnd,a=n[l].color;if(null!==a)h=n[l].movedFrom<e[s].group?"(<":"(>",i.push({text:"",type:h,color:a});for(var c=s;c<=r;c++){var h;if("="!==(h=e[c].type)&&"-"!==h&&"+"!==h||i.push({text:e[c].text,type:h,color:a}),"r"===h)i.push({text:e[c].text,type:h,color:e[c].id,markerType:e[c].markerType});else if("|"===h){for(var f,d=t[e[c].moved],u="",g=d.blockStart;g<=d.blockEnd;g++)"="!==e[g].type&&"-"!==e[g].type||(u+=e[g].text);f=d.blockStart<s?"<":">",i.push({text:u,type:f,color:d.color})}}null!==a&&i.push({text:"",type:" )",color:a})}for(var k=i.length,p=1;p<k;p++)i[p]&&"r"!==i[p].type&&i[p].type===i[p-1].type&&i[p].color===i[p-1].color&&""!==i[p].text&&""!==i[p-1].text&&(i[p-1].text+=i[p].text,i.splice(p,1),p--);i.unshift({text:"",type:"{",color:null},{text:"",type:"[",color:null}),i.push({text:"",type:"]",color:null},{text:"",type:"}",color:null})},this.clipDiffFragments=function(){var e=this.fragments;if(5!==e.length){var t=this.config.clipHeadingRight;this.config.clipParagraphRightMin<t&&(t=this.config.clipParagraphRightMin),this.config.clipLineRightMin<t&&(t=this.config.clipLineRightMin),this.config.clipBlankRightMin<t&&(t=this.config.clipBlankRightMin),this.config.clipCharsRight<t&&(t=this.config.clipCharsRight);var i=this.config.clipHeadingLeft;this.config.clipParagraphLeftMin<i&&(i=this.config.clipParagraphLeftMin),this.config.clipLineLeftMin<i&&(i=this.config.clipLineLeftMin),this.config.clipBlankLeftMin<i&&(i=this.config.clipBlankLeftMin),this.config.clipCharsLeft<i&&(i=this.config.clipCharsLeft);for(var n=e.length,o=0;o<n;o++){var l=e[o].type,s=e[o].color;if("="===l&&null===s){var r=e[o].text,a=r.length;if(!(a<t&&a<i)){for(var c,h=[],f=null;null!==(c=this.config.regExp.clipLine.exec(r));)h.push(c.index),f=this.config.regExp.clipLine.lastIndex;0!==h[0]&&h.unshift(0),f!==a&&h.push(a);for(var d=[],u=[];null!==(c=this.config.regExp.clipHeading.exec(r));)d.push(c.index),u.push(c.index+c[0].length);var g=[];for(f=null;null!==(c=this.config.regExp.clipParagraph.exec(r));)g.push(c.index),f=this.config.regExp.clipParagraph.lastIndex;0!==g[0]&&g.unshift(0),f!==a&&g.push(a);var k=null,p=null,m="",E="";if(2!==o){var x=a;if(this.config.clipLinesLeftMax<h.length&&(x=h[this.config.clipLinesLeftMax]),null===p)for(var w=u.length,b=0;b<w&&!(u[b]>this.config.clipHeadingLeft||u[b]>x);b++){p=u[b],E="heading";break}if(null===p){var v=g.length;for(b=0;b<v&&!(g[b]>this.config.clipParagraphLeftMax||g[b]>x);b++)if(g[b]>this.config.clipParagraphLeftMin){p=g[b],E="paragraph";break}}if(null===p){var A=h.length;for(b=0;b<A&&!(h[b]>this.config.clipLineLeftMax||h[b]>x);b++)if(h[b]>this.config.clipLineLeftMin){p=h[b],E="line";break}}null===p&&(this.config.regExp.clipBlank.lastIndex=this.config.clipBlankLeftMin,null!==(c=this.config.regExp.clipBlank.exec(r))&&c.index<this.config.clipBlankLeftMax&&c.index<x&&(p=c.index,E="blank")),null===p&&this.config.clipCharsLeft<x&&(p=this.config.clipCharsLeft,E="chars"),null===p&&(p=x,E="fixed")}if(o!==e.length-3){var D=0;if(h.length>=this.config.clipLinesRightMax&&(D=h[h.length-this.config.clipLinesRightMax]),null===k)for(b=d.length-1;b>=0&&!(d[b]<a-this.config.clipHeadingRight||d[b]<D);b--){k=d[b],m="heading";break}if(null===k)for(b=g.length-1;b>=0&&!(g[b]<a-this.config.clipParagraphRightMax||g[b]<D);b--)if(g[b]<a-this.config.clipParagraphRightMin){k=g[b],m="paragraph";break}if(null===k)for(b=h.length-1;b>=0&&!(h[b]<a-this.config.clipLineRightMax||h[b]<D);b--)if(h[b]<a-this.config.clipLineRightMin){k=h[b],m="line";break}if(null===k){var T=a-this.config.clipBlankRightMax;T<D&&(T=D),this.config.regExp.clipBlank.lastIndex=T;for(var C=null;null!==(c=this.config.regExp.clipBlank.exec(r));){if(c.index>a-this.config.clipBlankRightMin){null!==C&&(k=C,m="blank");break}C=c.index}}null===k&&a-this.config.clipCharsRight>D&&(k=a-this.config.clipCharsRight,m="chars"),null===k&&(k=D,m="fixed")}if(null!==p&&null!==k){if(p>k)continue;if(k-p<this.config.clipSkipChars)continue;var B=0;for(A=h.length,b=0;b<A&&!(h[b]>k||B>this.config.clipSkipLines);b++)h[b]>p&&B++;if(B<this.config.clipSkipLines)continue}if(null!==p||null!==k){var F=null,y=null;null!==p&&(F=(F=r.slice(0,p)).replace(this.config.regExp.clipTrimNewLinesLeft,""),"chars"===E?(y="~",F=F.replace(this.config.regExp.clipTrimBlanksLeft,"")):"blank"===E&&(y=" ~",F=F.replace(this.config.regExp.clipTrimBlanksLeft,"")));var S=null,N=null;null!==k&&(S=(S=r.slice(k)).replace(this.config.regExp.clipTrimNewLinesRight,""),"chars"===m?(N="~",S=S.replace(this.config.regExp.clipTrimBlanksRight,"")):"blank"===m&&(N="~ ",S=S.replace(this.config.regExp.clipTrimBlanksRight,""))),e.splice(o,1),n--,null!==p&&(e.splice(o++,0,{text:F,type:"=",color:null}),n++,null!==y&&(e.splice(o++,0,{text:"",type:y,color:null}),n++)),null!==p&&null!==k&&(e.splice(o++,0,{text:"",type:"]",color:null}),e.splice(o++,0,{text:"",type:",",color:null}),e.splice(o++,0,{text:"",type:"[",color:null}),n+=3),null!==k&&(null!==N&&(e.splice(o++,0,{text:"",type:N,color:null}),n++),e.splice(o++,0,{text:S,type:"=",color:null}),n++)}}}}!0===this.config.debug&&this.debugFragments("Fragments")}},this.getDiffHtml=function(e){var t=this.fragments;if(5!==t.length||"="!==t[2].type){for(var i=[],n=t.length,o=0;o<n;o++){var l=t[o].text,s=t[o].type,r=t[o].color,a="",c=!1;if(""!==l&&(c=this.config.regExp.blankBlock.test(l)),"{"===s?a=this.config.htmlCode.containerStart:"}"===s&&(a=this.config.htmlCode.containerEnd),"["===s?a=this.config.htmlCode.fragmentStart:"]"===s?a=this.config.htmlCode.fragmentEnd:","===s&&(a=this.config.htmlCode.separator),"~"===s&&(a=this.config.htmlCode.omittedChars)," ~"===s&&(a=" "+this.config.htmlCode.omittedChars),"~ "===s)a=this.config.htmlCode.omittedChars+" ";else if("(<"===s){if("old"!==e)h=!0===this.config.noUnicodeSymbols?this.config.msg["wiked-diff-block-left-nounicode"]:this.config.msg["wiked-diff-block-left"],a=!0===this.config.coloredBlocks?this.config.htmlCode.blockColoredStart:this.config.htmlCode.blockStart,a=this.htmlCustomize(a,r,h)}else if("(>"===s){var h;if("old"!==e)h=!0===this.config.noUnicodeSymbols?this.config.msg["wiked-diff-block-right-nounicode"]:this.config.msg["wiked-diff-block-right"],a=!0===this.config.coloredBlocks?this.config.htmlCode.blockColoredStart:this.config.htmlCode.blockStart,a=this.htmlCustomize(a,r,h)}else" )"===s&&"old"!==e&&(a=this.config.htmlCode.blockEnd);if("="===s)l=this.htmlEscape(l),null!==r?"old"!==e&&(a=this.markupBlanks(l,!0)):a=this.markupBlanks(l);else if("-"===s)"new"!==e&&("old"===e&&null!==r||(l=this.htmlEscape(l),l=this.markupBlanks(l,!0),a=!0===c?this.config.htmlCode.deleteStartBlank:this.config.htmlCode.deleteStart,a+=l+this.config.htmlCode.deleteEnd));else if("+"===s)"old"!==e&&(l=this.htmlEscape(l),l=this.markupBlanks(l,!0),a=!0===c?this.config.htmlCode.insertStartBlank:this.config.htmlCode.insertStart,a+=l+this.config.htmlCode.insertEnd);else if("<"===s||">"===s)"new"!==e&&(!1===this.config.showBlockMoves||"old"===e?(l=this.htmlEscape(l),l=this.markupBlanks(l,!0),a="old"===e?!0===this.config.coloredBlocks?this.htmlCustomize(this.config.htmlCode.blockColoredStart,r)+l+this.config.htmlCode.blockEnd:this.htmlCustomize(this.config.htmlCode.blockStart,r)+l+this.config.htmlCode.blockEnd:!0===c?this.config.htmlCode.deleteStartBlank+l+this.config.htmlCode.deleteEnd:this.config.htmlCode.deleteStart+l+this.config.htmlCode.deleteEnd):a="<"===s?!0===this.config.coloredBlocks?this.htmlCustomize(this.config.htmlCode.markLeftColored,r,l):this.htmlCustomize(this.config.htmlCode.markLeft,r,l):!0===this.config.coloredBlocks?this.htmlCustomize(this.config.htmlCode.markRightColored,r,l):this.htmlCustomize(this.config.htmlCode.markRight,r,l));else if("r"===s){var f=t[o].markerType;"c"===f?a=this.htmlCustomize(this.config.htmlCode.refillChange,r,l):"e"===f&&(a=this.htmlCustomize(this.config.htmlCode.refillError,r,l))}i.push(a)}this.html=i.join("")}else this.html=""},this.htmlCustomize=function(e,t,i){if(e=e.replace(/\{number\}/g,t),e=!0===this.config.noUnicodeSymbols?e.replace(/\{nounicode\}/g," wikEdDiffNoUnicode"):e.replace(/\{nounicode\}/g,""),void 0!==i){i.length>512&&(i=i.substr(0,512-" [...] ".length-128)+" [...] "+i.substr(i.length-128)),i=(i=(i=this.htmlEscape(i)).replace(/\t/g,"&nbsp;&nbsp;")).replace(/  /g,"&nbsp;&nbsp;"),e=e.replace(/\{title\}/,i)}return e},this.htmlEscape=function(e){return e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")},this.markupBlanks=function(e,t){return!0===t&&(e=(e=e.replace(/ /g,this.config.htmlCode.space)).replace(/\n/g,this.config.htmlCode.newline)),e=e.replace(/\t/g,this.config.htmlCode.tab)},this.wordCount=function(e){return(e.match(this.config.regExp.countWords)||[]).length},this.unitTests=function(){var e,t;this.getDiffHtml("new"),(e=this.html.replace(/<[^>]*>/g,""))!==(t=this.htmlEscape(this.newText.text))?(console.log("Error: wikEdDiff unit test failure: diff not consistent with new text version!"),this.error=!0,console.log("new text:\n",t),console.log("new diff:\n",e)):console.log("OK: wikEdDiff unit test passed: diff consistent with new text."),this.getDiffHtml("old"),(e=this.html.replace(/<[^>]*>/g,""))!==(t=this.htmlEscape(this.oldText.text))?(console.log("Error: wikEdDiff unit test failure: diff not consistent with old text version!"),this.error=!0,console.log("old text:\n",t),console.log("old diff:\n",e)):console.log("OK: wikEdDiff unit test passed: diff consistent with old text.")},this.debugBlocks=function(e,t){void 0===t&&(t=this.blocks);for(var i="\ni \toldBl \tnewBl \toldNm \tnewNm \toldSt \tcount \tuniq\twords \tchars \ttype \tsect \tgroup \tfixed \tmoved \ttext\n",n=t.length,o=0;o<n;o++)i+=o+" \t"+t[o].oldBlock+" \t"+t[o].newBlock+" \t"+t[o].oldNumber+" \t"+t[o].newNumber+" \t"+t[o].oldStart+" \t"+t[o].count+" \t"+t[o].unique+" \t"+t[o].words+" \t"+t[o].chars+" \t"+t[o].type+" \t"+t[o].section+" \t"+t[o].group+" \t"+t[o].fixed+" \t"+t[o].moved+" \t"+this.debugShortenText(t[o].text)+"\n";console.log(e+":\n"+i)},this.debugGroups=function(e,t){void 0===t&&(t=this.groups);for(var i="\ni \toldNm \tblSta \tblEnd \tuniq \tmaxWo\twords \tchars \tfixed \toldNm \tmFrom \tcolor\n",n=0;n<t.length;n++)i+=n+" \t"+t[n].oldNumber+" \t"+t[n].blockStart+" \t"+t[n].blockEnd+" \t"+t[n].unique+" \t"+t[n].maxWords+" \t"+t[n].words+" \t"+t[n].chars+" \t"+t[n].fixed+" \t"+t[n].oldNumber+" \t"+t[n].movedFrom+" \t"+t[n].color+"\n";console.log(e+":\n"+i)},this.debugFragments=function(e){for(var t=this.fragments,i="\ni \ttype \tcolor \ttext\n",n=t.length,o=0;o<n;o++)i+=o+' \t"'+t[o].type+'" \t'+t[o].color+" \t"+this.debugShortenText(t[o].text,120,40)+"\n";console.log(e+":\n"+i)},this.debugBorders=function(e,t){for(var i="\ni \t[ new \told ]\n",n=t.length,o=0;o<n;o++)i+=o+" \t[ "+t[o][0]+" \t"+t[o][1]+" ]\n";console.log(e,i)},this.debugShortenText=function(e,t,i){return"string"!==typeof e&&(e=e.toString()),void 0===t&&(t=50),void 0===i&&(i=15),(e=(e=e.replace(/\n/g,"\\n")).replace(/\t/g,"  ")).length>t&&(e=e.substr(0,t-1-i)+"\u2026"+e.substr(e.length-i)),'"'+e+'"'},this.time=function(e){this.timer[e]=(new Date).getTime()},this.timeEnd=function(e,t){var i=0;if(void 0!==this.timer[e]){var n=this.timer[e];i=(new Date).getTime()-n,this.timer[e]=void 0,!0!==t&&console.log(e+": "+i.toFixed(2)+" ms")}return i},this.timeRecursionEnd=function(e){if(this.recursionTimer.length>1){for(var t=this.recursionTimer.length-1,i=0;i<t;i++)this.recursionTimer[i]-=this.recursionTimer[i+1];var n=this.recursionTimer.length;for(i=0;i<n;i++)console.log(e+" recursion "+i+": "+this.recursionTimer[i].toFixed(2)+" ms")}this.recursionTimer=[]},this.debug=function(e,t){void 0===t?console.log(e):console.log(e+": "+t)},this.addScript=function(e){if(null===document.getElementById("wikEdDiffBlockHandler")){var t=document.createElement("script");t.id="wikEdDiffBlockHandler",void 0!==t.innerText?t.innerText=e:t.textContent=e,document.getElementsByTagName("head")[0].appendChild(t)}},this.addStyleSheet=function(e){if(null===document.getElementById("wikEdDiffStyles")){e=(e=e.replace(/\{cssMarkLeft\}/g,this.config.cssMarkLeft)).replace(/\{cssMarkRight\}/g,this.config.cssMarkRight);var t=document.createElement("style");t.id="wikEdDiffStyles",t.type="text/css",void 0!==t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)}},this.deepCopy=function(e,t){for(var i in e)!0===Object.prototype.hasOwnProperty.call(e,i)&&("object"===typeof e[i]?this.deepCopy(e[i],t[i]):t[i]=e[i])},this.init()};n.WikEdDiffText=function(e,t){this.parent=t,this.text=null,this.tokens=[],this.first=null,this.last=null,this.words={},this.init=function(){"string"!==typeof e&&(e=e.toString()),this.text=e.replace(/\r\n?/g,"\n"),!0===this.parent.config.timer&&this.parent.time("wordParse"),this.wordParse(this.parent.config.regExp.countWords),this.wordParse(this.parent.config.regExp.countChunks),!0===this.parent.config.timer&&this.parent.timeEnd("wordParse")},this.wordParse=function(e){var t=this.text.match(e);if(null!==t)for(var i=t.length,n=0;n<i;n++){var o=t[n];!1===Object.prototype.hasOwnProperty.call(this.words,o)?this.words[o]=1:this.words[o]++}},this.splitText=function(e,t){var i=null,n=null,o=this.tokens.length,l=o,s="";void 0===t?s=this.text:(i=this.tokens[t].prev,n=this.tokens[t].next,s=this.tokens[t].token);for(var r,a=0,c=[],h=0,f=this.parent.config.regExp.split[e];null!==(r=f.exec(s));)r.index>h&&c.push(s.substring(h,r.index)),c.push(r[0]),h=f.lastIndex;h<s.length&&c.push(s.substring(h));for(var d=c.length,u=0;u<d;u++)this.tokens.push({token:c[u],prev:i,next:null,link:null,number:null,unique:!1}),a++,null!==i&&(this.tokens[i].next=o),i=o,o++;a>0&&void 0!==t&&(null!==i&&(this.tokens[i].next=n),null!==n&&(this.tokens[n].prev=i)),a>0&&(void 0===t?(this.first=0,this.last=i):(t===this.first&&(this.first=l),t===this.last&&(this.last=i)))},this.splitRefine=function(e){for(var t=this.first;null!==t;)null===this.tokens[t].link&&this.splitText(e,t),t=this.tokens[t].next},this.enumerateTokens=function(){for(var e=0,t=this.first;null!==t;)this.tokens[t].number=e,e++,t=this.tokens[t].next},this.debugText=function(e){var i=this.tokens,n="first: "+this.first+"\tlast: "+this.last+"\n";n+='\ni \tlink \t(prev \tnext) \tuniq \t#num \t"token"\n';for(var o=this.first;null!==o;)n+=o+" \t"+i[o].link+" \t("+i[o].prev+" \t"+i[o].next+") \t"+i[o].unique+" \t#"+i[o].number+" \t"+t.debugShortenText(i[o].token)+"\n",o=i[o].next;console.log(e+":\n"+n)},this.init()},e.exports={WikEdDiff:n}},80:function(e,t,i){},82:function(e,t,i){},90:function(e,t,i){"use strict";i.r(t);var n=i(0),o=i.n(n),l=i(14),s=i.n(l),r=(i(74),i(11)),a=(i(78),i(65)),c=i(7),h=i(23),f=i(24),d=i(26),u=i(25),g=i(27),k=i(22),p=i(79),m=function(e,t){var i=(new(0,p.WikEdDiff)).diff(e,t);return o.a.createElement("div",{dangerouslySetInnerHTML:{__html:i}})},E=function(e,t){t=t&&t.replace("wiki","");var i=function(e){return encodeURI(e.replace(/ /gi,"_"))}(e);return o.a.createElement("span",null,o.a.createElement("a",{href:"https://"+t+".wikipedia.org/wiki/"+i,target:"_blank",rel:"noopener noreferrer"},e)," ",o.a.createElement("span",{style:{fontSize:"50%"}},"(",o.a.createElement("a",{href:"https://"+t+".wikipedia.org/w/index.php?title="+i+"&action=edit",target:"_blank",rel:"noopener noreferrer"},"edit")," ","|"," ",o.a.createElement("a",{href:"https://"+t+".wikipedia.org/w/index.php?title="+i+"&action=history",target:"_blank",rel:"noopener noreferrer"},"history"),")"))},x=i(15),w=function(e){function t(e){var i;return Object(h.a)(this,t),(i=Object(d.a)(this,Object(u.a)(t).call(this,e))).saveArticle=function(e){return function(t){i.props.isAuth?i.props.saveArticleData({result:e,textForSave:i.state.textAreaText}):x.b.warn("You have to log-in to save actions",{autoClose:5e3})}},i.state={textAreaText:"",origText:"",loading:!0,error:!1,isAuth:!1,status:"",articleEditing:!1,savingProcess:!1},i.handleChange=i.handleChange.bind(Object(k.a)(i)),i.saveArticle=i.saveArticle.bind(Object(k.a)(i)),i.setAsIncorrect=i.setAsIncorrect.bind(Object(k.a)(i)),i.toggleArticleEditing=i.toggleArticleEditing.bind(Object(k.a)(i)),i.toggleArticleEditing1=i.toggleArticleEditing1.bind(Object(k.a)(i)),i.setTextareaText=i.setTextareaText.bind(Object(k.a)(i)),i}return Object(g.a)(t,e),Object(f.a)(t,[{key:"setAsIncorrect",value:function(){this.props.goToNextArticle()}},{key:"setTextareaText",value:function(){if("undefined"!==typeof this.props.articleParams.changedText){var e=this.props.articleParams.changedText;this.setState({textAreaText:e})}}},{key:"componentDidMount",value:function(){this.props.setArticleData(this.setTextareaText)}},{key:"componentDidUpdate",value:function(e){this.props.article===e.article&&this.props.task===e.task||(this.props.setArticleData(this.setTextareaText),this.toggleArticleEditing(!1))}},{key:"toggleArticleEditing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.state.articleEditing;this.setState({articleEditing:e})}},{key:"toggleArticleEditing1",value:function(){this.setState({articleEditing:!this.state.articleEditing})}},{key:"handleChange",value:function(e){this.setState({textAreaText:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.article,i=e.loading,n=e.articleParams,l=n.origText,s=(n.changedText,n.status),r=e.isAuth,a=(e.task,e.lang),c=this.state,h=c.articleEditing,f=c.textAreaText;return o.a.createElement("div",null,o.a.createElement("div",null,i?o.a.createElement("div",null,"Loading"):o.a.createElement("div",null,o.a.createElement("h3",null,t&&""!==t?E(t,a):""),!r&&o.a.createElement("div",{className:"alert alert-primary",role:"alert"},"You have to ",o.a.createElement("a",{href:"//tools.wmflabs.org/booster/login",className:"alert-link"},"log-in")," to save actions!"),o.a.createElement("div",{className:"btn-group actionButtons",role:"group"},o.a.createElement("button",{disabled:!1,type:"button",className:"btn btn-outline-success",onClick:this.saveArticle("success")},"Save"),o.a.createElement("button",{disabled:!1,type:"button",className:"btn btn-outline-info",onClick:this.props.goToNextArticle},"Skip"),o.a.createElement("button",{disabled:!1,type:"button",className:"btn btn-outline-danger",onClick:this.saveArticle("error")},"No action needed"),o.a.createElement("button",{disabled:!1,type:"button",className:"btn btn-outline-info",onClick:this.toggleArticleEditing1},"Make changes")),"noaction"===s?o.a.createElement("div",{className:"noActionNeeded"},'No action needed for this article (press "Save")'):o.a.createElement("div",null,o.a.createElement("h4",null,"Edits"),l===f?o.a.createElement("div",{className:"noActionNeeded"},"No edit was made"):m(l,f)),h?o.a.createElement("div",null,o.a.createElement("h4",null,"Edit text"),"You have the option to edit text before saving it to Wikipedia:",o.a.createElement("textarea",{className:"form-control",rows:10,value:f,onChange:this.handleChange})):"")))}}]),t}(n.Component),b=function(e){return{type:"SET_ARTICLE",article:e.article,key:e.key}},v=function(e){return{type:"SET_ARTICLE_LOADING",payload:e}},A=function(e){return{type:"SET_ARTICLE_SAVING",payload:e}},D=function(e){return{type:"SET_ARTICLE_LIST_LOADING",payload:e}},T=function(e){return{type:"SET_TASK",id:e}},C=function(e){return{type:"SET_ARTICLE_LIST",list:e}},B="/",F=function(e){return function(t,i){t(v(!0));var n=i(),o=n.tasks.taskId,l=n.tasks.currentArticle.name,s=n.app.wiki,r="".concat(B,"task/").concat(s,"/").concat(o,"/").concat(l);return 101===o&&(r="".concat(B,"typo/fix/").concat(l)),fetch(r).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(i){var n,o=i.status,l=i.origText,s=i.changedText;i.message;t({type:"SET_ARTICLE_DATA",payload:{origText:(n={origText:l||"",status:null==l||null==s?"noaction":o,changedText:s||""}).origText,status:n.status,changedText:n.changedText}}),t(v(!1)),e()})}},y=function(e){return function(t,i){t(A(!0));var n=i(),o=n.tasks.taskId,l=n.app.wiki,s=n.tasks.currentArticle,r=s.name,a=s.params,c=a.changedText,h=a.status,f=e.result,d=e.textForSave,u={wiki:l.replace("wiki",""),job:o,status:h,article:r,result:f,wikitext:null==c?"":d};return fetch(B+"save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(e){t(A(!1)),"ok"===e.status||"info"===e.status?(x.b.info("Saved!",{autoClose:3e3}),t(b({}))):x.b.warn("An error occurred.",{autoClose:4500})}).catch(function(e){t(A(!1)),x.b.warn("An error occurred.",{autoClose:4500})})}},S=Object(r.b)(function(e){return{lang:e.app.wiki,isAuth:e.auth.isAuth,article:e.tasks.currentArticle.name,loading:e.tasks.articleLoading,articleParams:e.tasks.currentArticle.params,task:e.tasks.taskId}},function(e){return{setArticleData:function(t){e(F(t))},goToNextArticle:function(){e(b({}))},saveArticleData:function(t){e(y(t))},setChangedText:function(t){e(function(e){return{type:"HANDLE_TEXT_CHANGE",newText:e}}(t))}}})(w);var N=Object(r.b)(function(e){return{articles:e.tasks.articles,articleId:e.tasks.currentArticle.id}},function(e){return{selectArticle:function(t,i){e(b({article:t,key:i}))}}})(function(e){var t=e.articles,i=e.articleId,n=e.selectArticle;return o.a.createElement("div",{id:"articleList"},o.a.createElement("div",{id:"articleListTitle"},o.a.createElement("h3",null,"Article list")),t.length>0?t.map(function(e,t){return o.a.createElement("div",{key:t,onClick:function(){return n(e,t)},className:i===t?"currentArticle":"articleItem"},e)}):"")}),L=(i(80),function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"setup",value:function(){var e=this.props.match.params.id;this.props.setTask(e)}},{key:"componentDidMount",value:function(){this.setup()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.setup()}},{key:"render",value:function(){var e=this.props,t=e.loading,i=e.articles;return o.a.createElement("div",null,o.a.createElement("div",null,t?"Loading":o.a.createElement("div",null,i.length>0?o.a.createElement("div",null,o.a.createElement("div",{id:"taskPageFormat"},o.a.createElement("div",null,o.a.createElement(N,null)),o.a.createElement("div",{id:"taskArea"},o.a.createElement(S,null)))):"No articles!")))}}]),t}(n.Component)),M=function(e){return{type:"SET_WIKI_LANGUAGE",language:e}},O=function(e){return function(t,i){t(D(!0));var n=i();null===n.app.wiki&&t(M(e));var o=n.tasks.taskId,l=n.app.wiki;return fetch("".concat(B,"task/").concat(l,"/").concat(o,"/articles")).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(e){t(C(e)),t(D(!1))})}},R=Object(c.f)(Object(r.b)(function(e){return{articles:e.tasks.articles,loading:e.tasks.articlesLoading,articleId:e.tasks.currentArticle.id,taskId:e.tasks.taskId}},function(e,t){return{setTask:function(i){e(T(i)),e(O(t.match.params.lang))}}})(L)),I=(i(82),function(){return function(e,t){var i=t().app.wiki;return fetch("".concat(B,"tasks/").concat(i)).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(t){return e({type:"GET_TASKS",payload:t})})}}),j=Object(c.f)(Object(r.b)(function(e){return{tasks:e.tasks.description,wikis:e.app.wikis,wiki:e.app.wiki}},function(e){return{setWikiLang:function(t){e(M(t)),e(I())},setInitialState:function(){e({type:"NULLIFY_APP_STATE"})}}})(function(e){Object(n.useEffect)(function(){var t=e.match.params.lang;t?e.setWikiLang(t):e.setInitialState()},[e.match.params.lang]);var t=e.tasks,i=e.wiki,l=e.wikis;return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,o.a.createElement("i",null,"WikiBooster")),l.length>0&&null===i&&o.a.createElement(o.a.Fragment,null,"Choose Wikipedia to work on!",o.a.createElement("div",{className:"wikis"},l.map(function(t,i){return o.a.createElement("div",{className:"myCard",key:i,style:{cursor:"pointer"},onClick:(n=t,function(t){window.location="#/"+n,e.setWikiLang(n)})},t);var n}))),i&&o.a.createElement(o.a.Fragment,null,t.length>0?o.a.createElement("div",{className:"tasks"},t.map(function(e,t){return o.a.createElement("div",{className:"myCard",key:t},o.a.createElement("span",{className:"title"+(e.hasArticles?" clickable":""),onClick:(n=e.url_id,l=e.hasArticles,function(e){null!==l&&(window.location="#/".concat(i,"/task/").concat(n))})},e.task),o.a.createElement("br",null),o.a.createElement("span",{className:"description"},e.description),null==e.hasArticles&&o.a.createElement("span",{className:"noArticles"},"no articles"));var n,l})):"No tasks currently available for this Wikipedia"))})),_=i(9),H=i(43),P=i(68),W=function(e){function t(e){var i;return Object(h.a)(this,t),(i=Object(d.a)(this,Object(u.a)(t).call(this,e))).setupDate=function(){i.setState({data:i.props.data})},i.handleChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data";return function(n){var o="checkbox"===n.target.type?n.target.checked:n.target.value;i.setState({[t]:Object(_.a)({},i.state[t],{[e]:o})})}},i.handleTestChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data";return function(n){var o="checkbox"===n.target.type?n.target.checked:n.target.value,l=Object(H.a)(i.state.tests),s=Object(_.a)({},l[e]);s[t]=o,l[e]=s,i.setState({tests:l},function(){return console.log(i.state,e,t)})}},i.addNewTest=function(){i.setState(function(e){return{tests:[].concat(Object(H.a)(e.tests),[{test:"",expected:"",result:!0,actual:""}])}})},i.saveData=function(){var e=i.state.data,t=e.search_for,n=e.id;if(""!==t.trim()){console.log(i.props.match.params);var o=Object.assign({},i.state.data,{wiki:i.props.match.params.lang});fetch("".concat(B,"save_typo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(e){if("ok"===e.status){x.b.success("Typo saved!",{autoClose:4e3});var t=Object.assign({},i.state.data,{id:e.id,isNew:0==n,rowID:i.props.row});i.props.onDataUpdate(t)}})}else x.b.warn("Add at least search phrase",{autoClose:5e3})},i.state={loading:!1,error:!1,data:{}},i}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setupDate()}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this.state.data;return o.a.createElement("div",{style:{width:"99%"}},o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-4"},o.a.createElement("label",{for:"inputTitle"},"Title"),o.a.createElement("input",{type:"text",className:"form-control",id:"inputTitle",value:e.name,onChange:this.handleChange("name")})),o.a.createElement("div",{className:"form-group col-md-4"},o.a.createElement("label",{for:"inputFrom"},"What to search for?"),o.a.createElement("input",{type:"text",className:"form-control",id:"inputFrom",value:e.search_for,onChange:this.handleChange("search_for")})),o.a.createElement("div",{className:"form-group col-md-4"},o.a.createElement("label",{for:"inputTo"},"What to replace with?"),o.a.createElement("input",{type:"text",className:"form-control",id:"inputTo",value:e.replace_with,onChange:this.handleChange("replace_with")}))),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-4"},o.a.createElement("label",{for:"inputComment"},"Comment"),o.a.createElement("textarea",{className:"form-control",id:"inputComment",value:e.comment,onChange:this.handleChange("comment")})),o.a.createElement("div",{className:"form-group col-md-4"},o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"activeCheck",checked:e.active,onChange:this.handleChange("active")}),o.a.createElement("label",{className:"form-check-label",for:"activeCheck"},"Active")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"regexCheck",checked:e.regex,onChange:this.handleChange("regex")}),o.a.createElement("label",{className:"form-check-label",for:"regexCheck"},"Is regex")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"caseCheck",checked:e.case,onChange:this.handleChange("case")}),o.a.createElement("label",{className:"form-check-label",for:"caseCheck"},"Case sensitive"))),o.a.createElement("div",{className:"form-group col-md-4"},o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"wholeWorldCheck",checked:e.whole,onChange:this.handleChange("whole")}),o.a.createElement("label",{className:"form-check-label",for:"wholeWorldCheck"},"Match whole words")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"dumpCheck",checked:e.dumpsearch,onChange:this.handleChange("dumpsearch")}),o.a.createElement("label",{className:"form-check-label",for:"dumpCheck"},"Search dump")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"minorCheck",checked:e.minor,onChange:this.handleChange("minor")}),o.a.createElement("label",{className:"form-check-label",for:"minorCheck"},"Is minor")))),o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.saveData},"Save"))}}]),t}(n.Component),G=Object(c.f)(W),U=(i(83),function(e){var t=Object.keys(e).reduce(function(e,t){return e[t]=null,e},{});return console.log(t),t.id=0,t}),q=function(e){function t(e){var i;return Object(h.a)(this,t),(i=Object(d.a)(this,Object(u.a)(t).call(this,e))).setupDate=function(){var e=i.props.match.params.lang;fetch("".concat(B,"typo/").concat(e)).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(e){return i.setState({data:e})})},i.addNew=function(){var e=i.state,t=(e.page,e.data),n=(e.expanded,t.length);Math.round(n/10);i.setState({data:[].concat(Object(H.a)(i.state.data),[U(i.state.data[0])]),expanded:Object(_.a)({},i.state.expanded,{[n]:{}})})},i.handleDataUpdate=function(e){},i.state={loading:!1,error:!1,data:[],page:0,expanded:{}},i}return Object(g.a)(t,e),Object(f.a)(t,[{key:"setAsIncorrect",value:function(){this.props.goToNextArticle()}},{key:"componentDidMount",value:function(){this.setupDate()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.lang!==e.match.params.lang&&this.setupDate()}},{key:"render",value:function(){var e=this,t=this.state,i=t.error,n=t.loading,l=t.data;return i?o.a.createElement("div",null,"Error!"):n?o.a.createElement("div",null,"Loading..."):o.a.createElement("div",null,l&&l.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,{data:l,columns:[{Header:"Name",accessor:"name"},{Header:"What to search for?",accessor:"search_for"},{Header:"What to replace with",accessor:"replace_with"}],defaultPageSize:10,className:"-striped -highlight",SubComponent:function(t){return o.a.createElement(G,{data:t.row._original,onDataUpdate:e.handleDataUpdate,row:t.index})},page:this.state.page,expanded:this.state.expanded,onPageChange:function(t){return e.setState({page:t})},onExpandedChange:function(t){return e.setState({expanded:t})}})),o.a.createElement("button",{onClick:this.addNew,type:"button",className:"btn btn-primary"},"Add new typo!"))}}]),t}(n.Component),z=i(98),Y=i(100),K=i(101),$=i(99),J=i(97),V=function(e){var t=e.isAuth,i=e.username,n=e.tasks,l=e.wikis,s=e.wiki,r=s&&s.replace("wiki",""),a=n.filter(function(e){return null!==e.hasArticles}).map(function(e,t){return o.a.createElement(z.a.Item,{key:t,href:"#/".concat(s,"/task/").concat(e.url_id)},e.nav_title)}),c=l.map(function(e,t){return o.a.createElement(z.a.Item,{key:t,href:"#/".concat(e)},e)});return o.a.createElement(Y.a,{expand:"lg",bg:"dark",variant:"dark"},o.a.createElement(Y.a.Brand,{href:"#/"},"WikiBooster"),o.a.createElement(Y.a.Toggle,{"aria-controls":"navbar-nav"}),o.a.createElement(Y.a.Collapse,{id:"navbar-nav"},o.a.createElement(K.a,null,o.a.createElement(z.a,{title:"Wikis",id:"nav-wikis"},c),null!==s&&a.length>0&&o.a.createElement(z.a,{title:"Tasks",id:"nav-tasks"},a)),o.a.createElement(K.a,{className:"ml-auto"},o.a.createElement($.a,{placement:"bottom",delay:{show:200},overlay:o.a.createElement(J.a,{id:"t-github"},"Github")},o.a.createElement(K.a.Link,{href:"https://github.com/kosovojs/wikibooster",target:"_blank",rel:"noopener noreferrer"},o.a.createElement("i",{className:"fab fa-github spaced fa-lg"})))),o.a.createElement(K.a,null,t?o.a.createElement(o.a.Fragment,null,o.a.createElement(z.a,{title:"Hi, ".concat(i,"!"),id:"nav-tasks"},s&&o.a.createElement(z.a.Item,{href:"//".concat(r,".wikipedia.org/wiki/Special:Contributions/").concat(i)},"Contributions"),o.a.createElement(z.a.Item,{href:"/booster/logout"},o.a.createElement("i",{className:"fas fa-sign-out-alt"})," Logout"))):o.a.createElement(K.a.Link,{href:"/booster/login"},o.a.createElement("i",{className:"fas fa-sign-in-alt"})," Login"))))},Q=Object(r.b)(function(e){return{isAuth:e.auth.isAuth,username:e.auth.username,tasks:e.tasks.description,wiki:e.app.wiki,wikis:e.app.wikis}})(V),X=(i(86),function(e){return function(e,t){return e(D(!0)),e(M("lvwiki")),fetch("".concat(B,"typo/articles")).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(t){e(C(t)),e(D(!1))})}}),Z=Object(c.f)(Object(r.b)(function(e){return{articles:e.tasks.articles,loading:e.tasks.articlesLoading,articleId:e.tasks.currentArticle.id,taskId:e.tasks.taskId}},function(e,t){return{setTask:function(i){e(T(101)),e(X(t.match.params.lang))}}})(L)),ee=function(e){var t=e.location;return o.a.createElement("div",null,o.a.createElement("h3",null,"Did not found page ",o.a.createElement("code",null,t.pathname)))};var te=function(e){return Object(n.useEffect)(function(){return e.initialLoad()},[]),o.a.createElement(a.a,null,o.a.createElement(Q,null),o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/typofix",component:Z}),o.a.createElement(c.a,{exact:!0,path:"/:lang?",component:j}),o.a.createElement(c.a,{exact:!0,path:"/:lang/task/:id",component:R}),o.a.createElement(c.a,{exact:!0,path:"/:lang/typo",component:q}),o.a.createElement(c.a,{component:ee})),o.a.createElement(x.a,{position:"bottom-right",autoClose:2500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!1,pauseOnHover:!0}))},ie=function(){return function(e,t){return fetch("".concat(B,"wikis")).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(t){return e({type:"SET_WIKI_OPTIONS",data:t})})}},ne=Object(r.b)(null,function(e){return{initialLoad:function(){e(ie()),e(function(e){return fetch("".concat(B,"info")).then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(t){"ok"===t.status&&e({type:"LOGIN",username:t.username})})})}}})(te),oe=i(33),le=i(66),se=i(67),re={wiki:null,wikis:[]},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WIKI_LANGUAGE":var i=t.language;return Object(_.a)({},e,{wiki:i});case"SET_WIKI_OPTIONS":var n=t.data;return Object(_.a)({},e,{wikis:n});case"NULLIFY_APP_STATE":return Object(_.a)({},e,{wiki:null});default:return e}},ce={isAuth:!1,username:"",error:!1,errorMessage:""},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var i=t.username;return Object(_.a)({},e,{username:i,isAuth:!0});default:return e}},fe={taskId:null,description:[],articlesLoading:!1,articleLoading:!1,articles:[],currentArticle:{name:"",id:null,params:{origText:"",status:null,changedText:""}}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TASKS":var i=t.payload;return Object(_.a)({},e,{description:i});case"HANDLE_TEXT_CHANGE":var n=t.newText,o=Object(_.a)({},e);return o.currentArticle.params.changedText=n,o;case"SET_TASK":var l=t.id;return Object(_.a)({},e,{taskId:l,articles:[]});case"SET_ARTICLE_LIST":var s=t.list;return Object(_.a)({},e,{articles:s,currentArticle:{name:s[0],id:0,params:{origText:"",status:null,changedText:""}}});case"SET_ARTICLE":var r=t.article,a=t.key,c=e.currentArticle.id,h=a;"undefined"===typeof h&&(h=e.articles.length-c===1?0:c+1);var f="undefined"===typeof r?e.articles[h]:r;return Object(_.a)({},e,{currentArticle:Object(_.a)({},e.currentArticle,{name:f,id:h})});case"SET_ARTICLE_DATA":var d=t.payload,u=d.origText,g=d.status,k=d.changedText;return Object(_.a)({},e,{currentArticle:Object(_.a)({},e.currentArticle,{params:{origText:u,status:g,changedText:k}})});case"REMOVE_FROM_LIST":var p=t.article;return Object(_.a)({},e,{articles:e.articles.filter(function(e){return e!==p})});case"SET_ARTICLE_LIST_LOADING":var m=t.payload;return Object(_.a)({},e,{articlesLoading:m});case"SET_ARTICLE_LOADING":var E=t.payload;return Object(_.a)({},e,{articleLoading:E});default:return e}},ue=Object(oe.c)({app:ae,auth:he,tasks:de}),ge=Object(se.createLogger)(),ke=Object(oe.d)(ue,{},Object(oe.a)(le.a,ge)),pe=(i(87),i(88),i(89),document.getElementById("root"));s.a.render(o.a.createElement(r.a,{store:ke},o.a.createElement(ne,null)),pe)}},[[69,1,2]]]);
//# sourceMappingURL=main.5512f18a.chunk.js.map